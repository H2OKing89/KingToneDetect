; =============================================================
; Configuration File for [KingToneDetect]
; Version: 1.0.1
; Created: September 11, 2024
; Last Modified: September 11, 2024
; Author: Quentin King
; Description: 
;   This configuration file includes settings for email, 
;   audio processing, FTP uploads, heartbeat logging, and 
;   system alerts via Pushover. It controls various aspects 
;   of the program including file paths, server connections, 
;   and logging levels.
; Change Log:
;   v1.0.1 - Added audio processing and FTP upload settings.
;   v1.0.0 - Initial creation of the configuration file.
;
; NOTE:
;   The `.env` file, which stores sensitive information like 
;   passwords and API keys, must be placed in the root directory
;   of the project.
; =============================================================


[KingToneDetect_version]
Version = 1.0.1
Created = September 11, 2024
Author = Quentin King


[Resources]
monitor_resource_usage = true
max_cpu_usage = 80  ; Stop recording if CPU usage exceeds 80%
max_memory_usage = 70  ; Stop if memory usage exceeds 70%



; Testing and Debugging
[test_mode]
test_mode_enable = false
debug_mode_enable = false


; Email Configuration
[Email]
email_enable = false
email_user = ${EMAIL_USER}  ; Loaded from .env
email_pwd = ${EMAIL_PASSWORD}  ; Loaded from .env
email_server = smtp.example.com  ; Placeholder for SMTP server
email_port = 587
email_priority = 3
email_from = ${EMAIL_FROM}  ; Loaded from .env
email_security = STARTTLS
email_authentication = 1
email_send_sequential = none
bcc = 0

; Audio Configuration
[audio_configuration]
input_device_index = 0  ; input device index
audio_threshold = 54  ; audio threshold in dB
tone_offset = 0.0  ; offset in Hz to adjust tone detection
tone_tolerance = 0.02  ; allowable deviation in Hz for tone detection
tone_duration = 0.6  ; minimum tone duration in seconds
audio_channel = mono

; Recording Configuration
[Recording]
max_record_time = 40  ; maximum recording time in seconds
adaptive_silence_threshold = true
initial_silence_threshold = -40  ; starting threshold for silence detection
min_silence_threshold = -60  ; minimum allowable threshold for silence detection
silence_detection_grace_period = 5.0  ; seconds before starting silence detection
silence_duration_threshold = 10.0  ; maximum continuous silence allowed before stopping
convert_to_mp3 = true ; convert recorded audio to mp3
mp3_bitrate = 64000 ; mp3 bitrate in bits per second
wav_file_path = /audio/wav/ ; path to store .wav files 
mp3_file_path = /audio/mp3/ ; path to store .mp3 files
audio_codec_path = /codec/ ; path to store audio codec

; Recording Cleanup Configuration
[Cleanup]
enable_cleanup = true  ; Enable/Disable file cleanup
max_storage_limit = 1000  ; Maximum disk space in MB for audio storage
file_retention_days = 7  ; Delete files older than this many days
cleanup_interval_hours = 24  ; Time interval (in hours) between cleanup operations
archive_old_files = false  ; Set to true if you prefer to move old files to an archive directory instead of deleting them
archive_directory = /audio/archive/  ; Directory for storing archived files (if enabled)

; Disk Monitoring Configuration
[Disk_Monitoring]
enable_disk_monitoring = true  ; Enable disk usage monitoring
low_disk_threshold = 100  ; Minimum free disk space in MB before warning
disk_monitoring_interval_hours = 6  ; Time interval (in hours) to check disk space


; Audio Pre/Post-Processing
[Audio_Processing]
audio_preprocessing_enable = true 
audio_gain = 1.5 ; audio gain in dB
noise_reduction_enable = true 
audio_normalization_enable = true 



; FTP .mp3 Audio Configuration
[Audio_Upload_FTP]
audio_upload_ftp_enable = true
audio_upload_ftp_server = ${FTP_SERVER}  ; Loaded from .env
audio_upload_ftp_port = 21
audio_upload_ftp_username = ${AUDIO_FTP_USER}  ; Loaded from .env
audio_upload_ftp_password = ${AUDIO_FTP_PASSWORD}  ; Loaded from .env
audio_upload_ftp_passive = true
audio_upload_ftp_timeout = 30  ; ftp timeout in seconds 
audio_upload_ftp_retry = 3  ; number of retries for failed FTP uploads
retry_delay = 30  ; delay between retries in seconds
audio_upload_ftp_remote_path = /audio/
failed_upload_backup_path = /audio/failed_uploads/  ; local backup for failed uploads

; Web Server Configuration
[Webserver]
webserver_base = https://example.com/audio/  ; Placeholder for web server base URL

; Heartbeat Configuration
[Heartbeat]
heartbeat_enable = true
heartbeat_file_path = /logs/heartbeat/
heartbeat_update_interval = 60.0 ; heartbeat update interval in seconds




; Logging Configuration
; log_level = DEBUG, INFO, WARNING, ERROR, CRITICAL
[Logging]
log_file_directory = /logs/ 
log_file_max_size = 1000000 ; 1MB
log_console = true 
log_console_level = INFO 
log_console_format = %(asctime)s - %(name)s - %(levellevel)s - %(message)s 
log_file_level = INFO
log_file_format = %(asctime)s - %(name)s - %(levellevel)s - %(message)s

[Log_Archive]
log_archive_enable = true
log_archive_cleanup = true
log_archive_directory = /logs/archive/ 
log_archive_days = 7 
log_archive_file_count = 10

[Syslog]
syslog_server = true 
syslog_server_port = 514 
syslog_server_address = SYSLOG_SERVER_IP  ; Placeholder for internal IP
syslog_server_protocol = UDP 
syslog_server_format = %(asctime)s - %(name)s - %(levellevel)s - %(message)s
syslog_server_level = INFO 


; Admin Notification Settings
[Admin_Notifications]
notification_retries = 2  ; number of retries for failed notifications
retry_delay = 30  ; delay in seconds between retries
fallback_notification_method = email  ; fallback method if email fails
email_timeout = 30  ; timeout for sending email notifications
rate_limit_count = 3  ; maximum number of notifications allowed in the rate limit window
rate_limit_window = 3600  ; time window for rate limiting in seconds (e.g., 1 hour)

; Pushover System Configuration
[Pushover]
pushover_enable = true
pushover_user_key = ${PUSHOVER_USER_KEY}  ; Loaded from .env
pushover_api_key = ${PUSHOVER_API_KEY}  ; Loaded from .env
pushover_priority = 1 
pushover_retry = 30  ; retry interval in seconds
pushover_expire = 3600 
pushover_timeout = 30  ; timeout for sending Pushover notifications
pushover_sound = pushover
pushover_title = System Alert  ; Placeholder for Pushover title


; Webhook Integration
[Admin_Webhook]
webhook_enable = true
webhook_url = https://example.com/webhook  ; Placeholder for webhook URL
webhook_retry = 3
webhook_timeout = 30
webhook_method = POST
